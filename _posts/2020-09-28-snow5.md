---
layout: post
title: "John Snow: Cholera deaths aggregated by Broad Street pump rings"
date: 2020-09-28 12:35:00
image: /assets/img/
description:
main-class: 'demographics'
color:
tags:
- demographics
- points
- <500
- smaller areas
- rates
categories:
twitter_text:
introduction: 'John Snow: Cholera deaths aggregated by Broad Street pump rings'
---
<script>
  var map = L.map('map');
  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', { <!--this is the URL for the Nepal Geojson-->
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.light'
	}).addTo(map);

  map.scrollWheelZoom.disable();
  map.touchZoom.disable();
  var enableMapInteraction = function () {
      map.scrollWheelZoom.enable();
      map.touchZoom.enable();
  }
  $('#map').on('click touch', enableMapInteraction);
$('#map').on('mouseout', function(){ map.scrollWheelZoom.disable();});

  var smallIcon = L.icon({
         iconUrl: 'http://www.hckrecruitment.nic.in/images/blue.png',
         iconSize: [16, 16], // size of the icon
         });

   function onEachFeature(feature, layer) {
     //console.log(feature);
     var txt = "";
     for (var fname in feature.properties) {
       txt += fname;
       txt += " : ";
       txt += feature.properties[fname];
       txt += "<br/>";
     }
     layer.bindPopup(txt);
   }


  // load GeoJSON from an external file
  // load GeoJSON from an external file
  $.getJSON("../data/deaths_by_bsrings.geojson",function(data){
    // add GeoJSON layer to the map once the file is loaded
    var json = L.geoJson(data, {
      pointToLayer: function(feature, latlng) {
        
        return L.marker(latlng, {
          icon: smallIcon
        });
      },
      onEachFeature: onEachFeature
    });
    json.addTo(map);
    map.fitBounds(json.getBounds());
  });

</script>

[DOWNLOAD DATA](../data/snow5.zip)

This dataset combines two other datasets: Individual cholera deaths (see deaths) and the Broad Street pump, extracted from the 6 pumps dataset (see pumps). We created 60 polygons that represent rings that start at the location of the Broad Street pump and progress in 5-meter increments around the pump. We created these rings in QGIS to compare them in terms of cholera deaths, thus the dataset contains the count of deaths per ring. Since the outer rings cover more area than then inner rings, we also included the ring area (in squared meters). This was used to create a variable for death density, i.e. deaths per square meter, shown below.

The documentation is available at:

[DOWNLOAD DOCUMENTATION](../data/snow_documentation.pdf)

The Geoda script is available at:

[DOWNLOAD GEODA SCRIPT](../data/geoda_scripts_snow.pdf)


**Overview of data**

|	Variable	| 	Description 	|
|---|---|				
|	ID 	|	Unique ID 	|
| area | Area (in squared meters) |
|	deaths 	|	Number of deaths per building 	|
|	deathdens	|	Number of deaths per ring divided by area	|


Prepared by ([Center for Spatial Data Science](https://spatial.uchicago.edu/)). Last updated September 28, 2020. Data provided "as is," no warranties.

